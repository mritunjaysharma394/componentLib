<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home | Mritunjay Sharma</title>
    <link href="styles.css" rel="stylesheet" />
</head>

<body>
    <nav class="navigation container">
        <div class="nav-brand"><a class="link" href="/">Mritunjay Sharma</a></div>
        <label for="toggle"><img class="emoji" src="/images/burger.svg"></label>
        <input type="checkbox" id="toggle" />
        <ul class="list-non-bullet nav-pills">
            <li class="list-item-inline">
                <a class="link link-active" href="/"> <span class="icon"><img draggable="false" loading="eager"
                            class="emoji" alt="🏡" src="/images/home.svg"></span> home</a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="/projects.html"> <span class="icon"><img draggable="false" loading="eager"
                            class="emoji" alt="👨‍💻" src="images/projects.svg"></span> projects</a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="/blogs.html"> <span class="icon"><img draggable="false" loading="eager"
                            class="emoji" alt="🗒" src="images/blogging.svg"></span> blogs </a>
            </li>
            <li class="list-item-inline">
                <a class="link" href="https://drive.google.com/file/d/17zW8grPJZRVPUJFK2oLMcBYwqTbS1GIc/view"> <span
                        class="icon"><img draggable="false" loading="eager" class="emoji" alt="🗒"
                            src="images/approved.svg"></span> resume </a>
            </li>
        </ul>
    </nav>

    <header class="hero">
        <img class="hero-img" src="images/thanos-stacked-color.png" />
        <h1 class="hero-heading">Introduction to <span class="heading-inverted">Thanos!</span></h1>
    </header>

    <section class="section ow">
        <div class="container container-center">
            <hr>
            <h2 id="excerpt-a-beginner-friendly-introduction-to-thanos-">A beginner-friendly introduction to
                Thanos.</h2>
            <p>You can hate me for this but I am not an Avengers Series fan and I am not going to introduce you to the
                Thanos we meet there 😛</p>
            <p>Which Thanos are we going to talk about then? And do you really need to know anything as pre-requisites
                to understand what you will be learning in this blog? Nope :)</p>
            <h2 id="before-thanos-let-s-discuss-monitoring">Before Thanos, let&#39;s discuss Monitoring</h1>
                <p>There&#39;s this interesting saying-</p>
                <blockquote>
                    <p>&quot;Running a product without any monitoring is like NOT running the product at all&quot;</p>
                </blockquote>
                <p>Yes, that&#39;s right! Before we discuss &#39;what&#39;, let&#39;s discuss &#39;why&#39;!</p>
                <h2 id="let-s-make-you-run-a-startup">Let&#39;s make you run a Startup</h2>
                <p>Now, let us assume that you are reading this blog and you are running a startup that employs multiple
                    applications and is being used by thousands of users. Wow, already feeling amazing? :sunglasses:
                    Yes,
                    you should but let&#39;s see one fine day - one of your services breaks and multiple users start
                    facing
                    some kind of outage? (<em>I pray that it doesn&#39;t happen with you on weekend</em>) What will
                    happen
                    then? Well, I don&#39;t know exactly but it&#39;s a possibility that the game of pressures will
                    surely
                    begin which you will transfer to the Engineering Team and the Team will be passing it to you and you
                    just can&#39;t see hell breaking loose everywhere whether it&#39;s your team or it&#39;s the users.
                </p>
                <p>So what can you do to avoid this kind of situation or at least deal better? Yes, you are right -
                    Monitoring!
                    Won&#39;t the situation become really better if you know it in advance about the errors that can
                    come up
                    with the users? You and your engineering team will love it, in fact!
                    Monitoring is therefore very important. It not only helps you get alerted but also helps you observe
                    trends that can drive your decisions, low-level debugging, gaining insights and automation as well.
                </p>
                <p>That&#39;s all about Monitoring - but, hey, who will help you monitor your applications? </p>
                <h2 id="prometheus-anyone-said-monitoring-">Prometheus: Anyone said Monitoring?</h2>
                <p>You all wondering this blog is about Thanos but we are discussing Monitoring, Startup and now even
                    Prometheus? </p>
                <p>Relax, relax, relax. We are going to come to Thanos but we need to discuss all this before meeting
                    Thanos. You know meeting Thanos is not easy, right? Prometheus says you meet me and it&#39;s a
                    promise I
                    will let you meet Thanos! </p>
                <p><a href="https://prometheus.io/">Prometheus</a> is your leading open-source monitoring and alerting
                    solution and we are going to discuss in brief what it does and what are the certain limitations that
                    led
                    to Thanos? </p>
                <p>Prometheus in itself is a very vast solution to understand and this blog being beginner-friendly will
                    not
                    try to go into jargons. In plain simple words - Prometheus tries to focus on one thing and it does
                    that
                    extremely well. It offers a data model and a query language that helps you analyse how your
                    applications
                    are performing. </p>
                <p>So far so good but now we discuss few limitations in Prometheus that led to Thanos: </p>
                <ul>
                    <li>
                        <p>Imagine the petabytes of data being accumulated? If we just used Prometheus, at best, we can
                            have
                            retention of one week of data - What if the Engineering team needs data of a year back?
                            Prometheus, in itself, was not enough for the Retention of data.</p>
                    </li>
                    <li>
                        <p>Also, if we are trying to retain the data, can it be done in a cost-effective way? What about
                            the
                            sacrifice that we have to make with responsive query times? </p>
                    </li>
                    <li>
                        <p>Suppose, different Prometheus servers are up and you want metrics from a single query API?
                            This
                            again became a strong reason behind the birth of Thanos.</p>
                    </li>
                    <li>
                        <p>One important feature of Prometheus is its High Availability(HA) and it&#39;s great but you
                            see
                            that if we get the capability to merge the replicated data collected via its HA setups?</p>
                    </li>
                </ul>
                <p>All these problems led to the birth of Thanos!</p>
                <h2 id="thanos">Thanos</h2>
                <p>Let&#39;s talk about Thanos now! It began at <a href="http://improbable.io/">Improbable</a>, a
                    London-based company, by <strong>Bartek Plotka and Fabian Reinartz</strong>, and is now a
                    full-fledged
                    Open Source Project following the Cloud Native Computing Foundation Governance structure. </p>
                <p>So, what does Thanos does? Yes, it solves the above problems but how? Let&#39;s figure it out by
                    discussing Thanos architecture: </p>
                <ul>
                    <li>Solving Global Query View + HA: If we talk in simple words - Thanos is built on top of
                        Prometheus
                        and to get a global view on top of an existing Prometheus setup, we need to interconnect it.
                    </li>
                </ul>
                <blockquote>
                    <p>The Thanos Sidecar component does exactly what a side-car means. It is deployed next to each
                        running
                        Prometheus server and acts as a proxy. </p>
                </blockquote>
                <p><img class="blog-images" src="https://dev-to-uploads.s3.amazonaws.com/i/m9favvx7l2ac2tydcg4s.jpg"
                        alt="Global Query View+HA Architecture"></p>
                <figcaption>Thanos Side-Car component (Pic Source: <a
                        href="https://improbable.io/blog/thanos-prometheus-at-scale">https://improbable.io/blog/thanos-prometheus-at-scale</a>)
                </figcaption>

                <ul>
                    <li>Retention of historical Data using Object Data Storage Services (Like S3, Azure, GCP, etc) </li>
                </ul>
                <p><img class="blog-images" src="https://dev-to-uploads.s3.amazonaws.com/i/ct2xyquyo0y8eg3bgozj.jpg"
                        alt="Retention of historical Data using Object Data Storage Services"></p>
                <figcaption>Thanos using Object Data Storage Services (Pic Source: <a
                        href="https://improbable.io/blog/thanos-prometheus-at-scale">https://improbable.io/blog/thanos-prometheus-at-scale</a>)
                </figcaption>

                <ul>
                    <li>Downsampling: Yes, the historical data can be huge and this also means that you need to worry
                        about
                        the complexity of algorithms as it will affect the query times. Thanos thus uses the technique
                        of
                        Downsampling (A process that reduces the sampling rate of signal). Thanos will help Prometheus
                        achieve this which Prometheus alone cannot do. </li>
                </ul>
                <p><img class="blog-images" src="https://dev-to-uploads.s3.amazonaws.com/i/7yz1hx8b002zm2gwar7o.jpg"
                        alt="Downsampling"></p>
                <figcaption>Thanos Downsampling (Pic Source: <a
                        href="https://improbable.io/blog/thanos-prometheus-at-scale">https://improbable.io/blog/thanos-prometheus-at-scale</a>)
                </figcaption>

                <ul>
                    <li>Ruler class: Recording rules is important to reduce cost, latency and complexity of the
                        monitoring
                        stack. Prometheus although offers it in itself but there are few cases where it has limitations
                        like:<ul>
                            <li>alerting when two or more clusters are down.</li>
                            <li>Rules that are not in the scope of Prometheus Data Retention. </li>
                            <li>The case of storing all the rules and alerts at a single place.</li>
                        </ul>
                    </li>
                </ul>
                <p>To solve all these cases, Thanos offers a separate component called <code>Ruler</code> that evaluates
                    rules and alerts of Thanos queries. </p>
                <p><img class="blog-images" src="https://dev-to-uploads.s3.amazonaws.com/i/ho8de2816k6wpb79y9ml.jpg"
                        alt="Thanos-Ruler"></p>
                <figcaption>Thanos Ruler Component (Pic Source: <a
                        href="https://improbable.io/blog/thanos-prometheus-at-scale">https://improbable.io/blog/thanos-prometheus-at-scale</a>)
                </figcaption>

                <p>So this was a basic introduction that I tried to give you all about Thanos and I hope that this
                    introduction will invoke interests in you to dive deeper in Thanos. </p>
                <p>I am attaching links of a few excellent blogs, tutorials and videos that acted as a reference for me
                    and
                    will help you as well further: </p>
                <h3 id="links-to-blogs">Links to Blogs</h3>
                <ul>
                    <li>[Multi-Cluster Monitoring] (<a
                            href="https://banzaicloud.com/blog/multi-cluster-monitoring/">https://banzaicloud.com/blog/multi-cluster-monitoring/</a>)
                    </li>
                    <li>[HA Kubernetes Monitoring using Prometheus and Thanos]
                        (<a
                            href="https://medium.com/the-metricfire-blog/ha-kubernetes-monitoring-using-prometheus-and-thanos-48e8016abcf7">https://medium.com/the-metricfire-blog/ha-kubernetes-monitoring-using-prometheus-and-thanos-48e8016abcf7</a>)
                    </li>
                    <li>[Spinning up a highly available Prometheus setup with Thanos] (<a
                            href="https://appfleet.com/blog/progressive-feature-driven-delivery-with-flagger/">https://appfleet.com/blog/progressive-feature-driven-delivery-with-flagger/</a>)
                    </li>
                </ul>
                <h3 id="links-to-videos">Links to Videos</h3>
                <ul>
                    <li>[Thanos: Prometheus at Scale! - Lucas Servén Marín, Bartlomiej Plotka (DevConf 2020)] (<a
                            href="https://www.youtube.com/watch?v=q9j8vpgFkoY">https://www.youtube.com/watch?v=q9j8vpgFkoY</a>)
                    </li>
                    <li>[Intro to Thanos: Scale Your Prometheus Monitoring With Ease - Lucas Serven &amp; Dominic Green]
                        (<a
                            href="https://www.youtube.com/watch?v=m0JgWlTc60Q">https://www.youtube.com/watch?v=m0JgWlTc60Q</a>)
                    </li>
                </ul>
                <h3 id="link-to-interactive-tutorial-no-external-setup-required-">Link to Interactive Tutorial (No
                    external
                    setup required)</h3>
                <ul>
                    <li><a
                            href="https://www.katacoda.com/thanos/courses/thanos">https://www.katacoda.com/thanos/courses/thanos</a>
                    </li>
                </ul>
                <p><strong>PS:</strong> </p>
                <p>Thank you so much for reading the blog!😊</p>
                <p>Being a beginner myself with Thanos, I thought learning anything new will be better by writing about
                    it
                    and teaching it to others <span>&#x2728;</span></p>
                <p>However, there is a possibility that I might have made inadvertent errors or missed something. </p>
                <p>Please feel free to improve the blog by posting your feedback on Twitter. (<a
                        href="https://twitter.com/mritunjay394">https://twitter.com/mritunjay394</a>)</p>
        </div>
    </section>


    <footer class="footer">
        <div class="footer-header">Let's get in touch!</div>
        <ul class="social-links">
            <li class="list-item-inline">
                <a class="link" href="http://github.com/mritunjaysharma394"><img class="footer-sm-icon"
                        src="images/github.svg" />
                </a>
            </li class="list-item-inline"> <a class="link" href="https://twitter.com/mritunjay394"><img
                    class="footer-sm-icon" src="images/twitter.svg" />
            </a>
            </li class="list-item-inline"> <a class="link" href="https://www.linkedin.com/in/mritunjay394/"><img
                    class="footer-sm-icon" src="images/linkedin.svg" /></li>
            </a>
        </ul>
        <small> © Copyright Mritunjay Sharma </small>
    </footer>
</body>

</html>